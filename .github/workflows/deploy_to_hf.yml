name: Deploy Hugging Face App

on:
  push:
    paths:
      - 'hf_app/**'

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repo
        uses: actions/checkout@v3

      - name: Set up Git identity
        run: |
          git config --global user.email "hussnainkhalil2001@gmail.com"
          git config --global user.name "rhkraptor"

      - name: Push to Hugging Face
        run: |
          cd hf_app
          git init
          git remote add origin https://huggingface.co/spaces/rhkraptor/BananaOrApple
          git checkout -b main
          git add .
          git commit -m "Auto deploy update from GitHub Actions"
          git push --force https://rhkraptor:${{ secrets.HF_TOKEN }}@huggingface.co/spaces/rhkraptor/BananaOrApple main
